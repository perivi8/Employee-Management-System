<div class="register-container" *ngIf="!verificationMode" style="background-image: url(../assets/register.gif);">
  <form (ngSubmit)="onSubmit()" class="register-form">
    <h2>Register</h2>

    <div class="form-group">
      <i class="fas fa-user input-icon"></i>
      <input
        type="text"
        [(ngModel)]="username"
        name="username"
        placeholder="Username"
        required
        class="form-input"
      >
    </div>

    <div class="form-group">
      <i class="fas fa-envelope input-icon"></i>
      <input
        type="email"
        [(ngModel)]="email"
        name="email"
        placeholder="Email"
        required
        class="form-input"
      >
    </div>

    <div class="form-group">
      <i class="fas fa-lock input-icon"></i>
      <input
        type="password"
        [(ngModel)]="password"
        name="password"
        placeholder="Password"
        required
        class="form-input"
      >
    </div>

    <button type="submit" class="submit-btn" [disabled]="loadingRegister">
      <ng-container *ngIf="!loadingRegister">Register</ng-container>
      <ng-container *ngIf="loadingRegister">
        <span class="spinner"></span> Registering...
      </ng-container>
    </button>

    <div *ngIf="error" class="error">{{ error }}</div>
    <div *ngIf="success" class="success">{{ success }}</div>
  </form>
</div>

<div *ngIf="verificationMode" class="verify-container">
  <div class="verify-form">
    <h2>Verify Email</h2>
    <p>Enter the code sent to your email.</p>

    <div class="form-group">
      <i class="fas fa-key input-icon"></i>
      <input
        type="text"
        [(ngModel)]="verificationCode"
        name="code"
        placeholder="Verification Code"
        required
        class="form-input"
      >
    </div>

    <button class="submit-btn" (click)="verifyCode()" [disabled]="loadingVerify">
      <ng-container *ngIf="!loadingVerify">Verify</ng-container>
      <ng-container *ngIf="loadingVerify">
        <span class="spinner"></span> Verifying...
      </ng-container>
    </button>

    <div class="resend-section">
      <div *ngIf="!canResend" class="timer">Resend in {{ timerValue }}s</div>
      <button *ngIf="canResend" class="link-btn" (click)="resendCode()" [disabled]="loadingResend">
        <ng-container *ngIf="!loadingResend">Resend Code</ng-container>
        <ng-container *ngIf="loadingResend">
          <span class="spinner"></span> Sending...
        </ng-container>
      </button>
    </div>

    <div *ngIf="error" class="error">{{ error }}</div>
    <div *ngIf="success" class="success">{{ success }}</div>
  </div>
</div>